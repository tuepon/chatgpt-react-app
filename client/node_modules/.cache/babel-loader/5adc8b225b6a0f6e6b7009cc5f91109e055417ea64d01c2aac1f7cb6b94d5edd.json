{"ast":null,"code":"var _jsxFileName = \"/home/tomonori/dev/react/chatgpt-react-app/client/src/Components/Chat.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chat() {\n  _s();\n  const [newQuestion, setNewQuestion] = useState(\"\");\n  const [storedValues, setStoredValues] = useState([]);\n  const [loader, setLoader] = useState(false);\n  const [error, setError] = useState(\"\");\n  const handleSubmit = async e => {\n    var _e$preventDefault;\n    e === null || e === void 0 ? void 0 : (_e$preventDefault = e.preventDefault) === null || _e$preventDefault === void 0 ? void 0 : _e$preventDefault.call(e);\n    if (!newQuestion.trim()) return;\n    setLoader(true);\n    setError(\"\");\n    try {\n      var _data$content;\n      // proxy を設定した場合は \"/api/chat\" でOK。未設定なら \"http://localhost:3001/api/chat\"\n      const {\n        data\n      } = await axios.post(\"/api/chat\", {\n        message: newQuestion\n      });\n      const reply = (_data$content = data === null || data === void 0 ? void 0 : data.content) !== null && _data$content !== void 0 ? _data$content : \"(no content)\";\n      setStoredValues(prev => [...prev, {\n        q: newQuestion,\n        a: reply\n      }]);\n      setNewQuestion(\"\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"API Error:\", err);\n      const msg = (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || (err === null || err === void 0 ? void 0 : err.message) || \"Something went wrong.\";\n      setError(msg);\n    } finally {\n      setLoader(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 720,\n      margin: \"0 auto\",\n      padding: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      style: {\n        display: \"flex\",\n        gap: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: newQuestion,\n        onChange: e => setNewQuestion(e.target.value),\n        placeholder: \"Say hello...\",\n        style: {\n          flex: 1,\n          padding: 8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loader,\n        children: loader ? \"Sending...\" : \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: \"crimson\",\n        marginTop: 8\n      },\n      children: [\"Error: \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16\n      },\n      children: storedValues.map((item, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"You:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 18\n          }, this), \" \", item.q]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"AI:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 18\n          }, this), \" \", item.a]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"T0oHP7T01URWYb/mIvzfAaA1KuE=\");\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useState","axios","jsxDEV","_jsxDEV","Chat","_s","newQuestion","setNewQuestion","storedValues","setStoredValues","loader","setLoader","error","setError","handleSubmit","e","_e$preventDefault","preventDefault","call","trim","_data$content","data","post","message","reply","content","prev","q","a","err","_err$response","_err$response$data","console","msg","response","style","maxWidth","margin","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","display","gap","value","onChange","target","placeholder","flex","type","disabled","color","marginTop","map","item","idx","marginBottom","_c","$RefreshReg$"],"sources":["/home/tomonori/dev/react/chatgpt-react-app/client/src/Components/Chat.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function Chat() {\n  const [newQuestion, setNewQuestion] = useState(\"\");\n  const [storedValues, setStoredValues] = useState([]);\n  const [loader, setLoader] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e?.preventDefault?.();\n    if (!newQuestion.trim()) return;\n\n    setLoader(true);\n    setError(\"\");\n\n    try {\n      // proxy を設定した場合は \"/api/chat\" でOK。未設定なら \"http://localhost:3001/api/chat\"\n      const { data } = await axios.post(\"/api/chat\", { message: newQuestion });\n\n      const reply = data?.content ?? \"(no content)\";\n      setStoredValues((prev) => [...prev, { q: newQuestion, a: reply }]);\n      setNewQuestion(\"\");\n    } catch (err) {\n      console.error(\"API Error:\", err);\n      const msg =\n        err?.response?.data?.error ||\n        err?.message ||\n        \"Something went wrong.\";\n      setError(msg);\n    } finally {\n      setLoader(false);\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: 720, margin: \"0 auto\", padding: 16 }}>\n      <h1>Chat</h1>\n      <form onSubmit={handleSubmit} style={{ display: \"flex\", gap: 8 }}>\n        <input\n          value={newQuestion}\n          onChange={(e) => setNewQuestion(e.target.value)}\n          placeholder=\"Say hello...\"\n          style={{ flex: 1, padding: 8 }}\n        />\n        <button type=\"submit\" disabled={loader}>\n          {loader ? \"Sending...\" : \"Send\"}\n        </button>\n      </form>\n\n      {error && (\n        <div style={{ color: \"crimson\", marginTop: 8 }}>Error: {error}</div>\n      )}\n\n      <div style={{ marginTop: 16 }}>\n        {storedValues.map((item, idx) => (\n          <div key={idx} style={{ marginBottom: 12 }}>\n            <div><strong>You:</strong> {item.q}</div>\n            <div><strong>AI:</strong> {item.a}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}